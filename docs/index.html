<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Relative Pitch Adjuster</title>
  
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            // ソルフェージュカラー
            'solfege-do': '#ef4444',    // red-500
            'solfege-re': '#f97316',    // orange-500
            'solfege-mi': '#eab308',    // yellow-500
            'solfege-fa': '#22c55e',    // green-500
            'solfege-sol': '#3b82f6',   // blue-500
            'solfege-la': '#6366f1',    // indigo-500
            'solfege-si': '#a855f7',    // purple-500
          }
        }
      }
    }
  </script>
  
  <!-- Tone.js CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
  
  <!-- カスタムスタイル -->
  <link rel="stylesheet" href="css/styles.css">
</head>
<body class="dark bg-gray-900 text-white min-h-screen">
  
  <!-- ヘッダー -->
  <header class="bg-gray-800 shadow-lg">
    <div class="container mx-auto px-4 py-3">
      <h1 class="text-xl font-bold text-cyan-400">Relative Pitch Adjuster</h1>
    </div>
    <div class="result-banner-wrapper">
      <div id="result-banner" class="result-banner hidden" role="status" aria-live="polite"></div>
    </div>
  </header>
  
  <!-- メインコンテンツ -->
  <main class="container mx-auto px-4 py-6">
    
    <!-- ゲームエリア -->
    <div id="game-area" class="flex flex-col items-center justify-center min-h-[60vh]">
      
      <!-- 音符表示エリア -->
      <div id="notes-container" class="flex gap-2 sm:gap-4 mb-6 justify-center">
        <!-- QuestionNote コンポーネントが JS から挿入される -->
      </div>
      
      <!-- ボタンエリア -->
      <div class="flex gap-4 mt-6">
        <button id="btn-hide-cent" 
                class="px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg transition-colors">
          Hide Cent
        </button>
        <button id="btn-ok-next" 
                class="px-6 py-2 bg-cyan-500 hover:bg-cyan-400 text-gray-900 font-bold rounded-lg transition-colors">
          OK!
        </button>
      </div>
      
      <!-- Audio インジケーター -->
      <div class="audio-status mt-4" aria-live="polite">
        <span class="audio-status__label">Audio</span>
        <span id="audio-indicator" class="audio-indicator" title="Audio idle"></span>
      </div>

      <!-- Start ボタン -->
      <div class="flex justify-center mt-3">
        <button id="btn-start"
                class="px-5 py-2 bg-emerald-500 hover:bg-emerald-400 text-gray-900 font-bold rounded-lg transition-colors"
                title="Start the session and enable audio">
          Start
        </button>
      </div>

    </div>
    
    <!-- 下部パネル (Phase 5 で実装) -->
    <div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-6">
      
      <!-- Last Differences -->
      <div id="last-differences" class="bg-gray-800 rounded-lg p-4">
        <h2 class="text-lg font-semibold mb-3 text-gray-300">Your Last Gap</h2>
        <div id="differences-list" class="text-sm text-gray-400">
          <!-- 履歴が表示される -->
          <p class="text-gray-500 italic">No history yet</p>
        </div>
      </div>
      
      <!-- 難易度セレクタ -->
      <div id="difficulty-selector" class="bg-gray-800 rounded-lg p-4">
        <h2 class="text-lg font-semibold mb-3 text-gray-300">Difficulty</h2>
        <select id="difficulty-select" 
                class="w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white">
          <option value="0">No Check</option>
          <option value="1" selected>Easy (±50 cents)</option>
          <option value="2">Normal (±30 cents)</option>
          <option value="3">Hard (±10 cents)</option>
          <option value="4">Very Hard (±5 cents)</option>
        </select>
      </div>
      
    </div>

    <!-- How to Play -->
    <section id="how-to-play" class="mt-10 bg-gray-800 rounded-lg p-4">
      <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-3">
        <h2 id="howto-title" class="text-lg font-semibold text-gray-300">How to Play</h2>
        <div class="flex items-center gap-2">
          <label id="howto-lang-label" for="howto-lang" class="text-sm text-gray-400">Language</label>
          <select id="howto-lang"
                  class="bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm">
            <option value="en">English</option>
            <option value="ja">日本語</option>
            <option value="zh-Hans">中文（简体）</option>
            <option value="zh-Hant">中文（繁體）</option>
            <option value="ko">한국어</option>
            <option value="es">Español</option>
            <option value="pt-BR">Português (Brasil)</option>
            <option value="fr">Français</option>
            <option value="de">Deutsch</option>
            <option value="ru">Русский</option>
          </select>
        </div>
      </div>
      <div id="howto-content" class="howto-content text-sm text-gray-300"></div>
      <div class="mt-6 rounded-lg border border-gray-700 bg-gray-900/40 p-4">
        <h3 class="text-sm font-semibold tracking-wide text-gray-200">Solfège syllables and cents from Do</h3>
        <div class="mt-3 overflow-x-auto">
          <table class="min-w-full text-left text-sm text-gray-300">
            <thead class="text-xs uppercase tracking-wide text-gray-400">
              <tr>
                <th class="py-2 pr-4 font-medium">Solfège syllables</th>
                <th class="py-2 font-medium">Cents from Do</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-gray-800">
              <tr><td class="py-2 pr-4">Do↑</td><td class="py-2">1200</td></tr>
              <tr><td class="py-2 pr-4">Si↑</td><td class="py-2">1100</td></tr>
              <tr><td class="py-2 pr-4">La↑</td><td class="py-2">900</td></tr>
              <tr><td class="py-2 pr-4">Sol↑</td><td class="py-2">700</td></tr>
              <tr><td class="py-2 pr-4">Fa↑</td><td class="py-2">500</td></tr>
              <tr><td class="py-2 pr-4">Mi↑</td><td class="py-2">400</td></tr>
              <tr><td class="py-2 pr-4">Re↑</td><td class="py-2">200</td></tr>
              <tr><td class="py-2 pr-4">Do</td><td class="py-2">0</td></tr>
              <tr><td class="py-2 pr-4">Si↓</td><td class="py-2">-100</td></tr>
              <tr><td class="py-2 pr-4">La↓</td><td class="py-2">-300</td></tr>
              <tr><td class="py-2 pr-4">Sol↓</td><td class="py-2">-500</td></tr>
              <tr><td class="py-2 pr-4">Fa↓</td><td class="py-2">-700</td></tr>
              <tr><td class="py-2 pr-4">Mi↓</td><td class="py-2">-800</td></tr>
              <tr><td class="py-2 pr-4">Re↓</td><td class="py-2">-1000</td></tr>
              <tr><td class="py-2 pr-4">Do↓</td><td class="py-2">-1200</td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>
    
  </main>
  
  <!-- フッター -->
  <footer class="bg-gray-800 mt-auto py-4">
    <div class="container mx-auto px-4 text-center text-gray-500 text-sm">
      <p>Relative Pitch Adjuster - Web Version</p>
    </div>
  </footer>
  
  <!-- JavaScript モジュール -->
  <script type="module" src="js/main.js"></script>
  
</body>
</html>
